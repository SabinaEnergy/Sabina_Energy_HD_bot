import os, re, json, requests
from urllib.parse import urlencode
from flask import Flask, request, jsonify

# โโ ENV โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
BOT_TOKEN         = os.getenv("BOT_TOKEN")                          # ัะพะบะตะฝ ะฑะพัะฐ
BASE_URL          = os.getenv("BASE_URL", "https://example.onrender.com")  # ัะฒะพะน Render url
FREE_CALC_URL     = os.getenv("FREE_CALC_URL",  # ะบะฐะปัะบัะปััะพั HDS (ะฑะตัะฟะปะฐัะฝัะน)
    "https://human-design.space/dizajn-cheloveka-raschet-karty/#/")
PAID_URL          = os.getenv("PAID_URL", "https://human-design.space/?rave=YOUR_REF")
VIDEO_URL         = os.getenv("VIDEO_URL", "https://t.me/your_channel/123")
LEAD_FORM_URL     = os.getenv("LEAD_FORM_URL", "https://forms.gle/your_google_form")
SECRET_TOKEN      = os.getenv("SECRET_TOKEN", "SabinaSecret")       # ะดะปั ะฒะตะฑััะบะฐ

TG = f"https://api.telegram.org/bot{BOT_TOKEN}"

# โโ Flask โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
app = Flask(__name__)

# โโ ะะพัะพัะบะธะต ัะตะบััั (ะปะธะบะฑะตะท) โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
INFO_BLOCKS = [
    "๐ *Human Design* โ ัะพะฒัะตะผะตะฝะฝะฐั ัะธััะตะผะฐ ัะฐะผะพะฟะพะทะฝะฐะฝะธั.\nะะฝะฐ ัะพะตะดะธะฝัะตั ะฐัััะพะปะพะณะธั, ะ-ะฆะทะธะฝ, ะะฐะฑะฑะฐะปั, ัะฐะบัะพะฒัั ะผะพะดะตะปั ะธ ะฝะฐะฑะปัะดะตะฝะธั ะทะฐ ะฝะตะนััะธะฝะพ.",
    "๐ง *ะะดะตั ะฟัะพััะฐั:* ะฝะต ะผะตะฝััั ัะตะฑั, ะฐ ะถะธัั ะฒ ัะพะณะปะฐัะธะธ ัะพ ัะฒะพะตะน ะฟัะธัะพะดะพะน. ะะปัั โ ัะปะตะดะพะฒะฐัั *ะกััะฐัะตะณะธะธ* ะธ *ะะฒัะพัะธัะตัั*.",
    "๐น *ะขะธะฟั:* ะะฐะฝะธัะตััะพั, ะะตะฝะตัะฐัะพั, ะะฐะฝะธัะตััะธััััะธะน ะะตะฝะตัะฐัะพั, ะัะพะตะบัะพั, ะะตัะปะตะบัะพั.",
    "๐ *ะัะพัะธะปะธ:* ะฒัะตะณะพ 12 ะบะพะผะฑะธะฝะฐัะธะน (1/3, 1/4, 2/4, 2/5, 3/5, 3/6, 4/6, 4/1, 5/1, 5/2, 6/2, 6/3).",
]

TYPE_TIPS = {
    "ะผะฐะฝะธัะตััะพั":
        "โก๏ธ *ะะฐะฝะธัะตััะพั* โ ะธะฝะธัะธะธััะตั ะธ ะฟัะพะบะปะฐะดัะฒะฐะตั ะฟััั. ะกััะฐัะตะณะธั: _ะธะฝัะพัะผะธัะพะฒะฐัั ะฟะตัะตะด ะดะตะนััะฒะธะตะผ_.",
    "ะณะตะฝะตัะฐัะพั":
        "๐ *ะะตะฝะตัะฐัะพั* โ ััะฐะฑะธะปัะฝะฐั ัะฝะตัะณะธั ะธ ัะตะฐะปะธะทะฐัะธั ัะตัะตะท ะพัะบะปะธะบ. ะกััะฐัะตะณะธั: _ะถะดะฐัั ะพัะบะปะธะบะฐ_.",
    "ะผะฐะฝะธัะตััะธััััะธะน ะณะตะฝะตัะฐัะพั":
        "๐ *ะะฐะฝะธัะตััะธััััะธะน ะณะตะฝะตัะฐัะพั* โ ัะบะพัะพััั + ัััะพะนัะธะฒะพััั. ะกััะฐัะตะณะธั: _ะถะดะฐัั ะพัะบะปะธะบะฐ_, ะทะฐัะตะผ _ะธะฝัะพัะผะธัะพะฒะฐัั_.",
    "ะฟัะพะตะบัะพั":
        "๐ฏ *ะัะพะตะบัะพั* โ ะฒะธะดะธั ะดััะณะธั ะธ ะฝะฐะฟัะฐะฒะปัะตั. ะกััะฐัะตะณะธั: _ะถะดะฐัั ะฟัะธะณะปะฐัะตะฝะธั_.",
    "ัะตัะปะตะบัะพั":
        "๐ *ะะตัะปะตะบัะพั* โ ััะธะปะตะฝะฝะพ ััะฒััะฒัะตั ััะตะดั. ะกััะฐัะตะณะธั: _ะถะดะฐัั ะปัะฝะฝัะน ัะธะบะป (โ28 ะดะฝะตะน)_.",
}

# ะะพัะพัะบะธะต ะฟะพะดัะบะฐะทะบะธ ะฟะพ ะฐะฒัะพัะธัะตัะฐะผ (ะฟะพะดะผะตัะฐะตะผ, ะตัะปะธ ะฒัััะตัะฐะตััั ะฒ ัะตะบััะต)
AUTH_TIPS = {
    "ัะผะพัะธะพะฝ": "๐ *ะญะผะพัะธะพะฝะฐะปัะฝัะน ะฐะฒัะพัะธัะตั:* ัะตัะตะฝะธั โ ัะพะปัะบะพ _ะฟะพัะปะต ะฒะพะปะฝั_, ะฝะต ะฝะฐ ะฟะธะบะต ัะผะพัะธะน.",
    "ัะฐะบัะฐะป":  "๐ฅ *ะกะฐะบัะฐะปัะฝัะน ะฐะฒัะพัะธัะตั:* ะดะพะฒะตััะน ะผะณะฝะพะฒะตะฝะฝะพะผั ัะตะปะตัะฝะพะผั ะพัะบะปะธะบั ยซัะณั/ะฝะต-ัะณัยป.",
    "ัะตะปะตะท":  "๐ซถ *ะกะตะปะตะทัะฝะพัะฝัะน ะฐะฒัะพัะธัะตั:* ัะธัะฐั ะธะฝััะธัะธั ยซะทะดะตัั ะธ ัะตะนัะฐัยป.",
    "ัะณะพ":     "๐ช *ะญะณะพ-ะฐะฒัะพัะธัะตั:* ยซัะพัั/ะผะพะณั, ะผะฝะต ััะพ ะฟัะฐะฒะดะฐ ะฝัะถะฝะพ?ยป โ ัะตััะฝะพััั ั ัะพะฑะพะน.",
    "g-":      "๐ *G-ะฐะฒัะพัะธัะตั:* ะพัะธะตะฝัะธั โ ััะฒััะฒะพ ะฟัะฐะฒะธะปัะฝะพะณะพ ะฝะฐะฟัะฐะฒะปะตะฝะธั/ะธะดะตะฝัะธัะฝะพััะธ.",
    "ะผะตะฝัะฐะป":  "๐งฉ *ะะตะฝัะฐะปัะฝัะน (ั ะฟัะพะตะบัะพัะพะฒ):* ะพะฑััะถะดะฐะน ะฒัะปัั ั ะฑะตะทะพะฟะฐัะฝัะผะธ ะปัะดัะผะธ.",
    "ะปัะฝ":     "๐ *ะัะฝะฝัะน (ั ัะตัะปะตะบัะพัะพะฒ):* ะฟัะพะถะดะธ ~28 ะดะฝะตะน ะธ ะฝะฐะฑะปัะดะฐะน.",
}

PROFILE_TITLES = {
    "1/3":"1/3 โ ะััะปะตะดะพะฒะฐัะตะปั/ะััะตะฝะธะบ", "1/4":"1/4 โ ะััะปะตะดะพะฒะฐัะตะปั/ะะฟะฟะพัััะฝะธัั",
    "2/4":"2/4 โ ะััะตะปัะฝะธะบ/ะะฟะฟะพัััะฝะธัั", "2/5":"2/5 โ ะััะตะปัะฝะธะบ/ะัะตัะธะบ",
    "3/5":"3/5 โ ะััะตะฝะธะบ/ะัะตัะธะบ",        "3/6":"3/6 โ ะััะตะฝะธะบ/ะะพะปะตะฒะฐั ะผะพะดะตะปั",
    "4/6":"4/6 โ ะะฟะฟะพัััะฝะธัั/ะะพะปะตะฒะฐั ะผะพะดะตะปั","4/1":"4/1 โ ะะฟะฟะพัััะฝะธัั/ะััะปะตะดะพะฒะฐัะตะปั",
    "5/1":"5/1 โ ะัะตัะธะบ/ะััะปะตะดะพะฒะฐัะตะปั",  "5/2":"5/2 โ ะัะตัะธะบ/ะััะตะปัะฝะธะบ",
    "6/2":"6/2 โ ะะพะปะตะฒะฐั ะผะพะดะตะปั/ะััะตะปัะฝะธะบ","6/3":"6/3 โ ะะพะปะตะฒะฐั ะผะพะดะตะปั/ะััะตะฝะธะบ",
}
PROFILE_TIPS = {
    "1/3":"๐ ะัะฝะพะฒะฐ โ ะธััะปะตะดะพะฒะฐะฝะธะต ะธ ะปะธัะฝัะน ะพะฟัั/ะพัะธะฑะบะธ โ ัััะพะนัะธะฒะพััั.",
    "1/4":"๐ค ะะปัะฑะธะฝะฐ + ัะธะปะฐ ะพะบััะถะตะฝะธั/ัะฒัะทะตะน. ะะฝะฐะฝะธะต ะฟัะธะฝะพัะธั ะฒะพะทะผะพะถะฝะพััะธ.",
    "2/4":"๐ก ะัะถะฝั ะฒัะตะผั ะฝะฐ ยซะดะพะผ/ัะธัะธะฝัยป ะธ ะฟัะฐะฒะธะปัะฝัะต ะปัะดะธ/ะฟัะธะณะปะฐัะตะฝะธั.",
    "2/5":"๐งญ ะัะธัะพะดะฝัะน ัะฐะปะฐะฝั + ะฟัะฐะบัะธัะฝัะต ัะตัะตะฝะธั ะดะปั ะดััะณะธั. ะะตัะตะณะธ ะณัะฐะฝะธัั.",
    "3/5":"๐งช ะะฑััะตะฝะธะต ัะตัะตะท ะพะฟัั + ัะผะตะฝะธะต ัะธะฝะธัั ะธ ัะฟัะพัะฐัั ะดะปั ะดััะณะธั.",
    "3/6":"๐ง ะญัะฐะฟะฝะพััั ะฟััะธ: ะพะฟัั โ ะฝะฐะฑะปัะดะตะฝะธะต โ ัะพะปั ะผะพะดะตะปะธ.",
    "4/6":"๐ฅ ะกัะฐะฑะธะปัะฝะพััั ัะตัะตะท ัะฒัะทะธ, ะฟะพะทะถะต โ ะผัะดัะพััั ะธ ะฟัะธะผะตั.",
    "4/1":"๐งฑ ะะตะฟะพะบะพะปะตะฑะธะผะฐั ะพัะฝะพะฒะฐ + ัะธะปะฐ ะบะพะฝัะฐะบัะพะฒ. ะะฐะถะฝะพ ััะพััั ะฝะฐ ัะฒะพัะผ.",
    "5/1":"๐ฆธโโ๏ธ ะัะพะตะบัะธะพะฝะฝัะน ะพะฑัะฐะท ยซัะฟะฐัะฐัะตะปัยป + ะฝะฐะดัะถะฝะฐั ะฑะฐะทะฐ ะทะฝะฐะฝะธะน.",
    "5/2":"๐ฆ ะกะบัะพะผะฝัะน ัะฐะปะฐะฝั, ะบะพัะพััะน ะฒะธะดัั ะดััะณะธะต. ะะตัะตะณะธ ัะฝะตัะณะธั.",
    "6/2":"๐ฟ ะััะตััะฒะตะฝะฝะพััั + ะฟััั ะบ ัะพะปะธ ะผะพะดะตะปะธ ะบ 3ะผั ัะธะบะปั ะถะธะทะฝะธ.",
    "6/3":"๐ ะะฝะพะณะพ ะพะฟััะฐ/ะฟะตัะตะฟัะพะฑ, ะทะฐัะตะผ โ ะฒะทัะพัะปะตะฝะธะต ะดะพ ะผัะดัะพะน ัะพะปะธ.",
}

# โโ ะกะพััะพัะฝะธั (ะฟัะพััะฐั ะฟะฐะผััั ะฒ RAM) โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
waiting_type_profile = set()  # chat_id ัะตั, ะบัะพ ะฝะฐะถะฐะป ยซะฏ ะทะฝะฐั ัะฒะพะน ัะธะฟ/ะฟัะพัะธะปัยป

# โโ ะัะฟะพะผะพะณะฐะปะบะธ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
def tg(method, **params):
    return requests.post(f"{TG}/{method}", json=params, timeout=10)

def main_menu():
    return {
        "inline_keyboard":[
            [{"text":"โจ ะะฐัััะธัะฐัั ะฑะพะดะธะณัะฐั (ะฐะฝะบะตัะฐ)", "url": FREE_CALC_URL}],
            [{"text":"๐ ะะปะฐัะฝัะน ะพัััั", "url": PAID_URL}],
            [{"text":"๐ฅ ะะธะดะตะพ / ะธะฝััััะบัะธั", "url": VIDEO_URL}],
            [{"text":"โน๏ธ ะงัะพ ัะฐะบะพะต Human Design?", "callback_data":"info_hd"}],
            [
                {"text":"๐ ะ ัะธะฟะฐั", "callback_data":"info_types"},
                {"text":"๐ ะ ะฟัะพัะธะปัั", "callback_data":"info_profiles"}
            ],
            [{"text":"๐ ะฏ ะทะฝะฐั ัะฒะพะน ัะธะฟ/ะฟัะพัะธะปั", "callback_data":"i_know"}],
            [{"text":"๐ ะะพะปััะธัั PDF-ะณะฐะนะด", "url": LEAD_FORM_URL}],
            [{"text":"๐ผ ะะพะธ ััะปัะณะธ", "callback_data":"services"}],
        ]
    }

def send_blocks(chat_id, blocks):
    # ะพัะฟัะฐะฒะปัะตะผ ะฝะตัะบะพะปัะบะพ ัะพะพะฑัะตะฝะธะน ะฟะพะดััะด
    for b in blocks:
        tg("sendMessage", chat_id=chat_id, text=b, parse_mode="Markdown")

def parse_type(text):
    t = text.lower()
    if "ะผะฐะฝะธัะตััะธั" in t and "ะณะตะฝะตัะฐัะพั" in t: return "ะผะฐะฝะธัะตััะธััััะธะน ะณะตะฝะตัะฐัะพั"
    for key in ["ะผะฐะฝะธัะตััะพั", "ะณะตะฝะตัะฐัะพั", "ะฟัะพะตะบัะพั", "ัะตัะปะตะบัะพั"]:
        if key in t: return key
    return None

def parse_authority(text):
    t = text.lower()
    for key, tip in AUTH_TIPS.items():
        if key in t:  # ะธัะตะผ ะบััะพัะตะบ ัะปะพะฒะฐ: ัะผะพั, ัะฐะบัะฐะป, ัะตะปะตะท, ะปัะฝโฆ
            return tip
    return None

def parse_profile(text):
    m = re.search(r'([1-6])\s*[./]\s*([1-6])', text)
    if not m: return None
    return f"{m.group(1)}/{m.group(2)}"

# โโ ะะพััั โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
@app.get("/")
def health():
    return "OK"

@app.get("/set-webhook")
def set_webhook():
    url = f"{BASE_URL}/tg/webhook"
    r = requests.get(f"{TG}/setWebhook",
                     params={"url": url, "secret_token": SECRET_TOKEN}, timeout=10)
    return jsonify(r.json())

@app.post("/tg/webhook")
def webhook():
    # ะฑะตะทะพะฟะฐัะฝะพััั ะฒะตะฑััะบะฐ
    if request.headers.get("X-Telegram-Bot-Api-Secret-Token") != SECRET_TOKEN:
        return "forbidden", 403

    upd = request.get_json(silent=True) or {}
    # ะพะฑัะฐะฑะพัะบะฐ callback
    if "callback_query" in upd:
        cq = upd["callback_query"]
        chat_id = cq["message"]["chat"]["id"]
        data = cq.get("data","")

        if data == "info_hd":
            send_blocks(chat_id, INFO_BLOCKS)
            tg("sendMessage", chat_id=chat_id,
               text="ะฅะพัะตัั ะฟะพะฟัะพะฑะพะฒะฐัั ัะฐัััั? ะะผะธ ะบะฝะพะฟะบั ะฝะธะถะต ๐",
               reply_markup=main_menu())
        elif data == "info_types":
            tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
               text=("*ะขะธะฟั:* ะะฐะฝะธัะตััะพั, ะะตะฝะตัะฐัะพั, ะะฐะฝะธัะตััะธััััะธะน "
                     "ะะตะฝะตัะฐัะพั, ะัะพะตะบัะพั, ะะตัะปะตะบัะพั.\n\n"
                     "ะกะปะตะดัะน ะกััะฐัะตะณะธะธ ะธ ะะฒัะพัะธัะตัั โ ััะพ ะบะปัั! ๐"))
        elif data == "info_profiles":
            tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
               text=("ะัะตะณะพ *12 ะฟัะพัะธะปะตะน*: 1/3, 1/4, 2/4, 2/5, 3/5, 3/6, "
                     "4/6, 4/1, 5/1, 5/2, 6/2, 6/3.\n"
                     "ะัะพัะธะปั โ ััะพ ัะฒะพะน ััะธะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะผะธัะพะผ."))
        elif data == "i_know":
            waiting_type_profile.add(chat_id)
            tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
               text=("ะัะปะธัะฝะพ! ะะฐะฟะธัะธ ััะดะฐ ะพะดะฝะธะผ ัะพะพะฑัะตะฝะธะตะผ *ัะธะฟ* ะธ *ะฟัะพัะธะปั*.\n"
                     "ะะฐะฟัะธะผะตั: `ัะผะพัะธะพะฝะฐะปัะฝัะน ะณะตะฝะตัะฐัะพั 3/5` ะธะปะธ `ะัะพะตะบัะพั 4.1`"))
        elif data == "services":
            tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
               text=("๐ผ *ะะพะธ ััะปัะณะธ*\n"
                     "โข ะะฝะดะธะฒะธะดัะฐะปัะฝัะน ัะฐะทะฑะพั (90 ะผะธะฝัั) + ะฟะธััะผะตะฝะฝัะน ะพัััั.\n"
                     "โข ะะฐะทะฑะพั ัะธะฟะฐ/ะฟัะพัะธะปั, ัััะฐัะตะณะธะธ/ะฐะฒัะพัะธัะตัะฐ.\n\n"
                     "ะะฐะฟะธัะธ ะผะฝะต ะฒ ะปะธัะฝัะต ัะพะพะฑัะตะฝะธั: @coachsabina"))
        return "ok"

    # ะพะฑััะฝัะต ัะพะพะฑัะตะฝะธั
    msg = upd.get("message") or {}
    chat_id = (msg.get("chat") or {}).get("id")
    text = (msg.get("text") or "").strip()

    if not text:
        return "ok"

    if text.lower().startswith("/start"):
        tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
           text=("ะัะธะฒะตั! ะญัะพ ะฑะพั *Sabina Energy* ะฟะพ Human Design.\n\n"
                 "ะะดะตัั ะผะพะถะฝะพ: ัะดะตะปะฐัั ะฑะตัะฟะปะฐัะฝัะน ัะฐัััั (ะฐะฝะบะตัะฐ), "
                 "ัะทะฝะฐัั ะพัะฝะพะฒั, ะฟะตัะตะนัะธ ะบ ะฟะปะฐัะฝะพะผั ะพััััั ะธ ะฟะพัะผะพััะตัั ะฒะธะดะตะพ."),
           reply_markup=main_menu())
        # ะฟะพะดัะบะฐะทะบะฐ ะบ ะฑะตัะฟะปะฐัะฝะพะผั ัะฐััััั
        tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
           text=("ะะพะณะดะฐ *ัะฐัััะธัะฐะตัั ะบะฐััั* ะฝะฐ ัะฐะนัะต โ ะฒะตัะฝะธัั ััะดะฐ ะธ "
                 "ะฝะฐะฟะธัะธ ัะฒะพะน *ัะธะฟ* ะธ *ะฟัะพัะธะปั*. ะฏ ะฟัะธัะปั ะผะธะฝะธ-ัะฐะทะฑะพั โจ"))
        return "ok"

    # ะัะปะธ ะถะดัะผ ะพั ะฟะพะปัะทะพะฒะฐัะตะปั ัะธะฟ/ะฟัะพัะธะปั
    if chat_id in waiting_type_profile:
        waiting_type_profile.discard(chat_id)

        user_type = parse_type(text)            # ยซะณะตะฝะตัะฐัะพัยป, ยซะฟัะพะตะบัะพัยปโฆ
        profile   = parse_profile(text)         # ยซ3/5ยป ะธ ั.ะฟ.
        authority_tip = parse_authority(text)   # ะตัะปะธ ะฟะพะฟะฐะดัััั ยซัะผะพัะธะพะฝโฆยป, ยซัะฐะบัะฐะปโฆยป

        parts = []
        if user_type:
            parts.append(TYPE_TIPS.get(user_type, f"ะขะธะฟ: *{user_type}*"))
        if authority_tip:
            parts.append(authority_tip)
        if profile:
            title = PROFILE_TITLES.get(profile, f"ะัะพัะธะปั {profile}")
            parts.append(f"**{title}**\n{PROFILE_TIPS.get(profile,'')}".replace("**","*"))
        if not parts:
            parts = ["ะะต ัะผะพะณ ัะฐัะฟะพะทะฝะฐัั ัะธะฟ/ะฟัะพัะธะปั ๐ค ะะฐะฟะธัะธ, ะฟะพะถะฐะปัะนััะฐ, ะฒ ัะพัะผะฐัะต: "
                     "`ัะผะพัะธะพะฝะฐะปัะฝัะน ะณะตะฝะตัะฐัะพั 3/5` ะธะปะธ `ะัะพะตะบัะพั 4.1`."]

        # ะพัะฒะตั + CTA
        parts.append(f"\nะฅะพัะตัั ะณะปัะฑะถะต? ๐ ะะพะดัะพะฑะฝัะน ะพัััั ะทะดะตัั: {PAID_URL}")
        tg("sendMessage", chat_id=chat_id, parse_mode="Markdown",
           text="\n\n".join(parts), reply_markup=main_menu())
        return "ok"

    # ะคะพะปะฑัะบ: ะฟะพะบะฐะทัะฒะฐะตะผ ะผะตะฝั
    tg("sendMessage", chat_id=chat_id, text="ะัะฑะตัะธ ะดะตะนััะฒะธะต ะธะท ะผะตะฝั ๐",
       reply_markup=main_menu())
    return "ok"

# โโ Local run โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
